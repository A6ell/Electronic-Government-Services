{% extends "base.html" %} 
{% block title %}Applications{% endblock %} 
{% block content %}
<h1>Applications</h1>
<ul>
  {% for table in tables %}
  <li style="font-size: 20px; font-weight: bold">
    {{ table[0] }} - 
    {% if table[2] == 'Accepted' %}
      <span style="color: green">Accepted</span>
      <div>
        <div>
          <button class="btn btn-primary" disabled>Edit</button>
          <button class="btn btn-primary" disabled>Delete</button>
        </div>
      </div>
    {% elif table[2] == 'Pending' %}
      <span style="color: purple">Pending</span>
      <div>
        <div>
          <button class="btn btn-primary" onclick="redirectToForm('/{{ table[0] }}', 'button1')">Edit</button>
          <button class="btn btn-primary" onclick="sendDeleteRequest('{{ table[1] }}')">Delete</button>
        </div>
      </div>
    {% elif table[2] == 'Rejected' %}
      <span style="color: red">Rejected</span>
      <div>
        <div>
          <button class="btn btn-primary" disabled>Edit</button>
          <button class="btn btn-primary" disabled>Delete</button>
        </div>
      </div>
    {% endif %}
  </li>
  {% endfor %}
</ul>
<script>
  function redirectToForm(variable, buttonType) {
    var route = "/form" + variable + "?button_type=" + buttonType;
    window.location.href = route;
  }
  function sendDeleteRequest(table_id) {
    fetch("/delete", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ table_id: table_id }),
    }).then((_res) => {
      window.location.href = "/";
    });
  }
</script>
{% endblock %}